
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>agent-hive-deploy</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />

    <!-- Open Graph & Twitter -->
    <meta property="og:title" content="agent-hive-deploy" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <!-- Favicon -->
    <link rel="icon" href="/lovable-uploads/4c9c5130-a848-44f5-a1a6-d621b3c0dfb0.png" type="image/png">

    <!-- Tailwind base, components, utilities injected via your index.css -->

    <!-- HaiVE widget styling - more aggressive approach -->
    <style>
      /* Global styles to ensure widget stays on top */
      body {
        overflow-x: hidden;
      }

      /* Main content lower z-index */
      #root, main, section, header, footer {
        position: relative;
        z-index: 1;
      }

      /* Widget styling - forcefully applied with !important */
      .haive-fixed-container {
        position: fixed !important;
        bottom: 20px !important;
        right: 20px !important;
        z-index: 9999 !important;
        width: auto !important;
        height: auto !important;
        transform: none !important;
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
      }

      .haive-chat-window {
        position: fixed !important;
        bottom: 90px !important;
        right: 20px !important;
        z-index: 9999 !important;
        width: 350px !important;
        max-width: 90vw !important;
        max-height: 600px !important;
        transform: none !important;
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
      }

      /* Any extra elements that might be interfering */
      [class*="footer"], [class*="Header"], .sticky, .fixed {
        z-index: 1 !important;
      }
    </style>
  </head>

  <body class="overflow-auto">
    <!-- React's root container -->
    <div id="root"></div>

    <!-- 1) HaiVE widget loader â€” appended outside of #root -->
    <script
      async
      src="https://widget.haive.tech/widget.iife.js"
      data-id="e0cba082-be1e-4d12-88d9-b1f3c3eeafba_63767a13-c85c-4ede-b29f-c8691628025e"
      data-phone_number="6XHPXCcYFelxHXcQ"
      data-assistant_name="Sara"
      class="haive-widget"
    ></script>

    <!-- 2) Enhanced widget positioning script -->
    <script>
      // More robust approach to ensure consistent widget positioning
      function fixHaiVEWidgetPosition() {
        // Find the loader script
        const loader = document.querySelector('script.haive-widget');
        if (!loader) return;
        
        // Look for the widget elements that get injected
        // This covers both the chat button and open window
        const widgetElements = document.querySelectorAll('[id^="haive-"], [class^="haive-"], [data-haive]');
        
        // Apply fixed positioning to all related elements
        widgetElements.forEach(element => {
          // Skip the original script tag
          if (element === loader) return;
          
          // Chat button handling
          if (element.tagName === 'BUTTON' || element.classList.contains('button') || 
              element.getAttribute('aria-label')?.includes('chat')) {
            element.classList.add('haive-fixed-container');
            applyStyles(element, {
              position: 'fixed',
              bottom: '20px',
              right: '20px',
              zIndex: '9999',
            });
          } 
          // Chat window/container handling
          else if (element.tagName === 'DIV' && 
                  (element.classList.contains('window') || 
                   element.classList.contains('container') || 
                   element.classList.contains('chat'))) {
            element.classList.add('haive-chat-window');
            applyStyles(element, {
              position: 'fixed',
              bottom: '90px',
              right: '20px',
              zIndex: '9999',
              width: '350px',
              maxWidth: '90vw',
              maxHeight: '600px'
            });
          }
          // Any parent wrappers
          else {
            applyStyles(element, {
              position: 'static',
              transform: 'none',
              zIndex: '9999'
            });
          }
        });
      }
      
      // Helper to apply styles with !important
      function applyStyles(element, styles) {
        Object.entries(styles).forEach(([property, value]) => {
          element.style.setProperty(property, value, 'important');
        });
      }
      
      // Run immediately and set up observers
      document.addEventListener('DOMContentLoaded', function() {
        // Initial run
        fixHaiVEWidgetPosition();
        
        // Run periodically to catch any dynamic changes
        setInterval(fixHaiVEWidgetPosition, 500);
        
        // Also watch for DOM changes
        new MutationObserver(function(mutations) {
          fixHaiVEWidgetPosition();
        }).observe(document.body, { 
          childList: true, 
          subtree: true,
          attributes: true,
          attributeFilter: ['style', 'class']
        });
      });
    </script>

    <!-- 3) Your React entrypoint -->
    <script type="module" src="/src/main.tsx"></script>

    <!-- 4) KEEP this last tag! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
  </body>
</html>
